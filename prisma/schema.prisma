datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       String @id @default(cuid())
  email    String @unique
  password String // Store a hashed password
  isHost  Boolean @default(false)
  
  hostProfile HostProfile?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Spacecraft {
  id    Int    @id @default(autoincrement())
  name  String
  speed Float

  // Relational fields
  typeID Int
  type   SpaceCraftType @relation(fields: [typeID], references: [id])

  statusID Int
  status   BookingStatus @relation(fields: [statusID], references: [id])

  hostProfileID Int
  hostProfile   HostProfile @relation(fields: [hostProfileID], references: [id])

  tags  Tag[]  

  // Collection of related images
  images SpacecraftImages[]

  // Metadata
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SpacecraftImages {
  imageID      Int        @id @default(autoincrement())
  spacecraftID Int
  imagePath    String
  description  String?
  spacecraft   Spacecraft @relation(fields: [spacecraftID], references: [id])

  @@map("spacecraft_images")
}

model SpaceCraftType {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  spaceCrafts Spacecraft[]
}

model BookingStatus {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  spaceCrafts Spacecraft[]
}

model HostProfile {
  id      Int    @id @default(autoincrement())
  details String // Example field for host-specific details

  userID      String       @unique
  user        User         @relation(fields: [userID], references: [id])
  spacecrafts Spacecraft[] // Relation to Spacecrafts hosted by this profile

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Destination {
  id          Int    @id @default(autoincrement())
  name        String @unique
  description String
  distance    String
  travelTime  String

  tags  Tag[]  

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TagCategory {
  id    Int    @id @default(autoincrement())
  name  String @unique
  tags  Tag[]
}

model Tag {
  id          Int            @id @default(autoincrement())
  name        String         @unique
  categoryId  Int
  category    TagCategory    @relation(fields: [categoryId], references: [id])
  destinations Destination[] 
  spacecrafts Spacecraft[]   
}
